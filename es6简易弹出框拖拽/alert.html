<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		html,body{
			height:1000px;
			margin: 0;
		}
		.full-pop {
			position: absolute;
			left: 0;
			top: 0;
			width: 300px;
			padding:10px;
			background: #fff;
			border: 1px solid #ccc;
		}
		.dialogTop {
			overflow: hidden;
		}
		.dialogTop .title{
			float: left;
			font-size: 12px;
		}
		.dialogTop .close{
			float: right;
		}
		.content {
			padding:30px 0;
		}
		.pop-btns {
			text-align: right;
		}
	</style>
</head>
<body>
	<input type="button" value="登录" id="login" />
	<script src="drag.js"></script>

	<script>
	class Dialog extends Drag{
		constructor(options){
			super();//需要调用父级的构造函数，用来构建this
			this.newOptions = {
				title: '弹框',
				content: '默认内容',
				okValue: 'sure',
				cancelValue: 'cancel'
			}
			// 合并对象 只是前复制
			Object.assign(this.newOptions,options);

			this._init();//生成弹框之后;

		}

		_init(){
			//将生成的结构放入这个属性中
			this.dialog = this._createDialog();
			//将属性放入document.body,中
			document.body.appendChild( this.dialog );
			//继承完之后，使用this就可以访问到父类的方法了
			this.drag(this.dialog );
			//获取元素X
			this.close = this.dialog.querySelector(".close");
			//设置dialog的定位
			this._positionDialog();

			//绑定事件
			this._addEvent();
		}
		// 组件的模板
		_html(){
			return `<div class="dialogTop">
						<div class="title">${this.newOptions.title}</div>
				        <span class="close" title="关闭">×</span>
					</div>
		            <div class="content">
		               ${this.newOptions.content}
		            </div>
		            <div class="pop-btns">
		            	<button class="ok"> ${this.newOptions.okValue}</button>
		            	<button class="cancel"> ${this.newOptions.cancelValue}</button>
		            </div>`
		}

		_createDialog(){
			var dialog = document.createElement('div');
			dialog.className = 'full-pop';
			dialog.innerHTML = this._html();
			return dialog;
		}

		// 对弹框进行定位
		_positionDialog(){

			var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
			this.dialog.style.left = (document.documentElement.clientWidth - this.dialog.offsetWidth)/2 + 'px';
			this.dialog.style.top = (document.documentElement.clientHeight - this.dialog.offsetHeight)/2 + scrollTop + 'px';
		}

		//给元素绑定事件
		_addEvent(){
			// this -> 实例
			// 当浏览器窗口变大变小时 alert保持居中
			window.addEventListener('resize',function (){
				this._positionDialog();	
			}.bind(this))
			// 当浏览器滚动条滚动时 alert保持居中
			window.addEventListener('scroll',function (){
				this._positionDialog();	
			}.bind(this))

			//点击X把dialog移出
			this.close.addEventListener('click',function (){
				document.body.removeChild(this.dialog);
			}.bind(this));

		}

	}




		login.onclick=function(){
				var obj = {
					title:'这是alert',
					//content:html,
					okValue:"ok",
					cancelValue:"cancel",
				}
				new Dialog(obj);
		}
	</script>
</body>
</html>